<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex">
    <meta>
    <title>Google AdSense App</title>
</head>
<body>

<!-- adsense advertisement -->
<div class="drive_widget_main">
    <!-- adsense code -->
    {% if code is defined %}
        {{ code|raw }}
    {% else %}
        {# preview, values can be accessed through {{ adUnit.backgroundColor }} #}
        <!-- adsense customization -->
        <script type="text/javascript">
            // client configuration
            google_ad_client = "ca-pub-5195028014239031";
            google_ad_slot = '';
            google_alternate_ad_url = "http://www.wix.com/alternate/page/when/the/ad/cannot/be/displayed";

            // width and height
            google_ad_width = {{ adUnit.width }};
            google_ad_height = {{ adUnit.height }};
            google_ad_format = '{{ adUnit.width }}x{{ adUnit.height }}_as';

            // type of ad
            {% if adUnit.type != 'IMAGE' %}
                google_ad_type = 'text';
            {% else %}
                google_ad_type = 'image';
            {% endif %}

            // font style
            google_font_face = '{{ adUnit.fontFamily }}';
            google_font_size = '{{ adUnit.fontSize }}';

            // colors
            google_color_border = '{{ adUnit.borderColor }}';
            google_color_bg = '{{ adUnit.backgroundColor }}';
            google_color_link = '{{ adUnit.titleColor }}';
            google_color_url = '{{ adUnit.urlColor }}';
            google_color_text = '{{ adUnit.textColor }}';

            // corners
            {% if adUnit.cornerStyle == 'SQUARE' %}
                google_ui_features = 'rc:4';
            {% elseif adUnit.cornerStyle == 'SLIGHTLY_ROUNDED' %}
                google_ui_features = 'rc:6';
            {% elseif adUnit.cornerStyle == 'VERY_ROUNDED' %}
                google_ui_features = 'rc:10';
            {% endif %}
        </script>
        <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
        <script type="text/javascript"><!--
            google_ad_client = "pub-1786553880586297";
            /* 728x15, created 9/27/09 */
            // google_ad_slot = "4099013594";
            google_ad_width = 300;
            google_ad_height = 250;
            //-->
        </script>
    {% endif %}
</div>

<!-- wix sdk -->
<script type="text/javascript" src="//sslstatic.wix.com/services/js-sdk/1.16.0/js/Wix.js"></script>

<!-- dependency scripts -->
{% javascripts filter='closure'
'@WixGoogleAdSenseAppBundle/Resources/public/app/lib/jquery/jquery.js' %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}

<script>
    (function() {
        var sizes = [
            { width: 300, height: 250 },
            { width: 336, height: 280 },
            { width: 728, height: 90 },
            { width: 160, height: 600 },
            { width: 320, height: 50 },
            { width: 468, height: 60 },
            { width: 234, height: 60 },
            { width: 120, height: 600 },
            { width: 120, height: 240 },
            { width: 300, height: 600 },
            { width: 250, height: 250 },
            { width: 200, height: 200 },
            { width: 180, height: 150 },
            { width: 125, height: 125 },
            { width: 728, height: 15 },
            { width: 468, height: 15 },
            { width: 200, height: 90 },
            { width: 180, height: 90 },
            { width: 160, height: 90 },
            { width: 120, height: 90 }
        ];

        $(window).resize(function(event){
            var width = $(event.target).width(),
                height = $(event.target).height(),
                matching = [],
                largest;

            $.each(sizes, function(key, size) {
                if (size.width <= width && size.height <= height) {
                    matching.push(size);
                }
            });

            $.each(matching, function(key, size) {
                if (largest === undefined || (size.width * size.height) > (largest.width * largest.height)) {
                    largest = size;
                }
            });

            google_ad_width = largest.widget;
            google_ad_height = largest.height;

            $('#').attr('src', $('#').attr('src'));

            console.log(largest.width, largest.height);
        });
    }());

    $(function() {
        Wix.reportHeightChange($('body').height());
    });
</script>
</body>
</html>